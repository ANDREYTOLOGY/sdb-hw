# Домашнее задание к занятию "`Репликация и масштабирование. Часть 2`" - `Чернышов Андрей`

### Задание 1

#### 1. Активный master-сервер и пассивный репликационный slave-сервер  

В случае сбоя master-сервера slave может быть переведен в режим master
Минимальное время простоя при аварийном переключении  
Бэкапы можно делать с slave-сервера, не нагружая основной сервер  


#### 2. Master-сервер и несколько slave-серверов

Нагрузка чтения распределяется между несколькими slave-серверами  

Разные slave могут использоваться для разных целей:  
Один для отчетов и аналитики  
Другой для веб-приложения  
Третий для резервного копирования  

При выходе из строя одного slave, остальные продолжают работать  
Несколько точек восстановления данных  
Возможность быстрого переключения на любой slave  

### Задание 2.


Для начала опишем систему распределения данных: каждая из трех таблиц — пользователи, книги и магазины — будет размещена на отдельных физических серверах или кластерах.  
Это вертикальное разделение позволяет изолировать нагрузку разных сущностей и масштабировать их независимо друг от друга.  
Пользователи будут работать со своим выделенным шардом, книги — со своим, а магазины — с третьим. Данная реализация представляет собой вертикальное шардирование.  

Внутри каждого из этих вертикальных шардов мы применим горизонтальное разделение данных. Это означает, что данные каждой таблицы будут распределены по нескольким узлам на основе определенных критериев.  
Для пользователей таким критерием станет идентификатор пользователя — мы разделим их по диапазонам ID. Например, первые полмиллиона пользователей попадут на один узел, следующие полмиллиона — на другой, и так далее. Это позволит равномерно распределить нагрузку от операций с пользователями.  
Для книг мы выберем другой принцип горизонтального разделения — по алфавитным группам названий. Книги, названия которых начинаются на буквы от A до K, будут храниться на одном узле, от L до S — на втором, от T до Z — на третьем. Такое разделение естественным образом балансирует данные и обеспечивает предсказуемое распределение.  
Магазины же мы будем шардировать по географическому признаку. Европейские магазины разместим на одном узле, азиатские — на втором, американские — на третьем. Это соответствует паттерну доступа к данным, так как запросы часто ограничены определенным регионом.  

#### Вертикальный шардинг (разделение по таблицам)
```

Пользователи → отдельный сервер (шард 1)

Книги → отдельный сервер (шард 2)

Магазины → отдельный сервер (шард 3)
```

#### Горизонтальный шардинг (разделение внутри таблиц)
```
Пользователи: разделение по user_id 

Книги: разделение по book_id или жанрам

Магазины: разделение по географическому признаку
```

![Блок-схема](https://github.com/ANDREYTOLOGY/sdb-hw/blob/main/img/block.jpg)


