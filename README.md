# Домашнее задание к занятию "`Базы данных, их типы`" - `Чернышов Андрей`

### Задание 1
### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

*Т.к. в этом случае требуется  гарантированная целостность данных и четкая структура, лучшим типом СУБД для данной задачи будет являтся - реляционная СУБД (MySQL, PostgreSQL, Oracle Database или Microsoft SQL Server). Обосновываем данный выбор тем, что финансовые данные должны быть строго структурированы (счета, статьи затрат, проекты, периоды).*

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

*Лучший тип СУБД:
Для лендингов: Документная NoSQL СУБД (например, MongoDB) или быстрая ключ-значение СУБД (например, Redis) для сессий и кеша.  
Для CRM: Реляционная (SQL) СУБД (например, PostgreSQL) или Документная NoSQL СУБД (например, MongoDB).  
Лендинги требуют быстрой записи данных о визитах, гибкости в хранении данных форм. MongoDB отлично подходит для хранения JSON-объектов с лидами.  
Если CRM — это сложная система с взаимоотношениями клиентов, сделками, задачами и строгой структурой, то реляционная СУБД (PostgreSQL) будет надежнее. Если же нужна максимальная гибкость и скорость разработки, то и здесь подойдет MongoDB.*

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

*Да, можно. Универсальным компромиссом может стать PostgreSQL. Для лендингов использовать таблицы с JSONB-полями для хранения гибких данных лидов. Это дает и структуру, и гибкость. Для CRM использовать классические реляционные таблицы (Компании, Контакты, Сделки, Задачи).*

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

*Лучший тип СУБД: Реляционная СУБД (PostgreSQL, MySQL) или Графовая СУБД (Neo4j). Структура базы знаний часто хорошо ложится на реляционную модель.  
PostgreSQL с его мощным полнотекстовым поиском идеально подходит для быстрого нахождения нужных материалов.  
Графовая СУБД была бы интересна для моделирования сложных, перекрестных связей между документами, но для большинства корпоративных вики это избыточно.*

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

*Лучший тип СУБД: Графовая СУБД (Neo4j,  OrientDB, ArangoDB).Графовые СУБД созданы для работы со связями. Сущности "Склад", "Строительный объект", "Курьер" — это узлы. А "Дорога между объектами", "Назначение курьера на маршрут" — это связи.  
Позволяют легко и быстро выполнять запросы типа "найти все объекты в радиусе 10 км от склада" или "построить оптимальный маршрут для курьера с учетом 5 точек".*

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

*Нет, не стоит использовать графовую СУБД для отдела закупок, но можно организовать интеграцию. Отдел закупок работает с заказами, поставщиками, счетами — это классическая реляционная модель (как в задаче 1.1). Им подойдет SQL-СУБД*

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

*Да, но это будет компромисс, который приведет к потере производительности и гибкости в ключевых областях. 
Универсальный кандидат: PostgreSQL.*

### Задание 2. Транзакции
2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

*1.Запрос в банк: Оператор отправляет в банк запрос на списание средств.  
2.Списание банком: Банк проверяет карту и резервирует сумму.  
3.Подтверждение банка: Банк сообщает оператору об успешном списании.  
4.Зачисление услуг: Оператор добавляет минуты/трафик на счёт абонента.  
5.Подтверждение оператора: Оператор уведомляет банк об оказании услуги.  
6.Окончательный расчёт: Банк переводит деньги со счёта клиента на счёт оператора.*

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

*1.Запуск по графику. Система оператора формирует список автоплатежей.  
2.Массовый запрос в банк: Оператор отправляет пакет запросов на списание. 
3.Обработка банком: Банк обрабатывает каждый запрос и возвращает результаты.  
4.Проверка платежа. Система пытается списать деньги с привязанной карты.  
Действия оператора:  
5.При успехе — зачисляет услуги  
5.При неудаче — фиксирует ошибку 
6.Уведомление: Абоненты получают смс о результате операции.*

### Задание 3. SQL vs NoSQL
3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

*1.Стандартный язык (SQL)  
Единый и мощный язык запросов для всех операций. Навыки работы с одной SQL-базой легко переносятся на другую.  
2.Гарантированная целостность данных (ACID)  
Транзакции обрабатываются по принципу «Все или ничего».   
3.Жёсткая структура (Схема)  
Данные организованы в строгие таблицы и столбцы. Это защищает от ошибок, обеспечивает ясность и предсказуемость данных.  
4.Сложные запросы и связи (JOIN)  
Идеальны для агрегации данных и построения отчетов из множества связанных таблиц. Сила там, где важны связи между сущностями.  
5.Зрелость и надёжность  
Проверены десятилетиями использования. Имеют мощные сообщества, обширную документацию и надежные инструменты администрирования.*

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Перед SQL -	Масштабируемость: Легко масштабируются горизонтально (добавлением серверов) для обработки огромных нагрузок, оставаясь при этом такими же быстрыми.  
Перед NoSQL - Полная поддержка ACID: Дают ту же гарантию целостности данных, что и классические SQL-системы, чего часто не хватает NoSQL.*

### Задание 4. Кластеры
Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

*Ключевой критерий выбора: Модель согласованности данных (CAP-теорема). Нужно выбрать между:  
Точностью данных при любых условиях (CP-системы)  
Непрерывной работой даже ценой временной несогласованности (AP-системы)  
Лучшая модель вычислений: MapReduce (в современных реализациях типа Apache Spark)  
Почему:  
Идеально дробит задачи на тысячи параллельных процессов  
Обрабатывает данные там, где они хранятся  
Автоматически перераспределяет нагрузку при сбоях  
Оптимальное решение: Связка колоночной СУБД (ClickHouse/Cassandra) для хранения + Apache Spark для вычислений.*
